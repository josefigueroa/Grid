form_focus=function(){var n=$('input[type="text"]'),e=$(this).attr("placeholder");n.each(function(){var n=($('input[type="text"]'),$(this).attr("placeholder"));$(this).val().length>0||void 0!==n?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")}),n.on("change",function(){0!==$(this).val().length||void 0!==e?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")}),n.on("focusin",function(){$(this).val().length>=0||void 0!==e?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")}),n.on("focusout",function(){0!==$(this).val().length?$(this).siblings(".label-label").addClass("floating-label"):void 0!==$(this).attr("placeholder")?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")})},form_focus(),header=function(){header_scroll=function(){$(window).scroll(function(){var n=$(window).scrollTop();n<this.beforeTop?$("header").slideDown(300):$("header").slideUp(300),this.beforeTop=n})},activeMenu=function(){$("header li").on("click",function(){$("header li").removeClass("active"),$(this).addClass("active")})},header_dropdown=function(){$("header a").click(function(){$(this).siblings(".dropdownMenu").slideToggle(300)}).on("focusout",function(){$(this).siblings(".dropdownMenu").fadeOut(300)}),$(document).keyup(function(n){27===n.keyCode&&$(".enlaces a").siblings(".dropdownMenu").hide()})},slideMenu=function(n){$(n).on("click",function(n){var e=$(".enlaces");$("body");e.toggleClass("open"),$(".sideNav").addClass("side-overlay"),$(".nav-icon").addClass("icon-active")}),$(".sideNav").click(function(){$("nav").find(".enlaces").removeClass("open"),$(this).removeClass("side-overlay"),$(".nav-icon").removeClass("icon-active")})},header_scroll(),header_dropdown(),activeMenu(),slideMenu("#btn-menu")},header(),init=function(){dropdownMenu(".header__nav__menuHeader__listItem__enlace"),scrollToTop(".scrollTop"),activeMenu(".header__nav__menuHeader__listItem"),acordeon(".acordeon-title",".acordeon-paragraph"),llamadaAjax(".li-item"),pegamento(".contentfixed")},headerFixed=function(n){var e="header_fixed";$(window).on("scroll",function(){$(window).scrollTop()>30?$(n).addClass(e):$(n).removeClass(e)})},pegamento=function(n){$(window).scroll(function(){var e=$(window).scrollTop();e>30?$(n).addClass("fixed"):$(n).removeClass("fixed")})},seguimiento=function(n,e){$(n).on("scrollSpy:enter",function(){var n="#"+$(this).attr("id");$(e).each(function(){var o=$(this).children("a"),t=o.attr("href");n==t&&($(e).removeClass("active"),$(this).addClass("active"))})}),$(n).on("scrollSpy:exit",function(){var n="#"+$(this).attr("id");$(e).each(function(){var e=$(this).children("a"),o=e.attr("href");n==o&&$(this).removeClass("active")})}),$(n).scrollSpy()},dropdownMenu=function(n){$(".header__nav__menuHeader__listItem__enlace");$(n).click(function(){$(this).siblings(".dropdownMenu").slideToggle(300)}).on("focusout",function(){$(this).siblings(".dropdownMenu").fadeOut(300)})},slideMenu=function(n,e){$(n).on("click",function(n){var e=$(".enlaces");$("body");e.toggleClass("open")}),$(e).on("click",function(){var n=$("#btn-menu");n.removeClass("open"),$("body").css({"padding-left":"0",transition:"all 0.3s"}),$('<div class="overlay"></div>').detach()})},scrollToTop=function(n){$(window).on("scroll",function(){$(window).scrollTop()>80?$(n).slideDown():$(n).slideUp()}),$(n).click(function(){$("body").animate({scrollTop:0},400)})},activeMenu=function(n){$(n).on("click",function(){$(n).removeClass("active"),$(this).addClass("active")})},acordeon=function(n,e){$(n).click(function(){$(this).siblings(e).slideToggle(100),$(this).parent().siblings().find(e).slideUp(),$(this).children().toggleClass("fa-chevron-down fa-chevron-up"),$(this).parent().siblings().find("i").removeClass("fa-chevron-up").addClass("fa-chevron-down")})},llamadaAjax=function(n){$(n).on("click",function(n){var e=$(this).data("href");$.ajax({url:e+".html",async:!0,dataType:"html",success:function(n){$(".content_container").html(n)},error:function(n){$(".content_container").html("<h4>Lo sentimos, se produjo un error</h4>")}})})},$(document).ready(function(){init()}),function(n){n.fn.pluginName=function(e){var o={foo:"bar"},t={},i={init:function(e){return this.each(function(){t=n.extend({},o,e);n(this)})},foo_public_method:function(){}};return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void n.error('Method "'+e+'" does not exist in pluginName plugin!'):i.init.apply(this,arguments)}}(jQuery),function(n){function e(e,o,t,i){var l=n();return n.each(a,function(n,a){var s=a.offset().top,r=a.offset().left,c=r+a.width(),d=s+a.height(),u=!(r>o||c<i||s>t||d<e);u&&l.push(a)}),l}function o(){++c;var o=l.scrollTop(),t=l.scrollLeft(),i=t+l.width(),a=o+l.height(),r=e(o+d.top,i+d.right,a+d.bottom,t+d.left);n.each(r,function(n,e){var o=e.data("scrollSpy:ticks");"number"!=typeof o&&e.triggerHandler("scrollSpy:enter"),e.data("scrollSpy:ticks",c)}),n.each(s,function(n,e){var o=e.data("scrollSpy:ticks");"number"==typeof o&&o!==c&&(e.triggerHandler("scrollSpy:exit"),e.data("scrollSpy:ticks",null))}),s=r}function t(){l.trigger("scrollSpy:winSize")}function i(n,e,o){var t,i,l,a=null,s=0;o||(o={});var r=function(){s=o.leading===!1?0:u(),a=null,l=n.apply(t,i),t=i=null};return function(){var c=u();s||o.leading!==!1||(s=c);var d=e-(c-s);return t=this,i=arguments,d<=0?(clearTimeout(a),a=null,s=c,l=n.apply(t,i),t=i=null):a||o.trailing===!1||(a=setTimeout(r,d)),l}}var l=n(window),a=[],s=[],r=!1,c=0,d={top:0,right:0,bottom:0,left:0},u=Date.now||function(){return(new Date).getTime()};n.scrollSpy=function(e,t){e=n(e),e.each(function(e,o){a.push(n(o))}),t=t||{throttle:100},d.top=t.offsetTop||0,d.right=t.offsetRight||0,d.bottom=t.offsetBottom||0,d.left=t.offsetLeft||0;var s=i(o,t.throttle||100),c=function(){n(document).ready(s)};return r||(l.on("scroll",c),l.on("resize",c),r=!0),setTimeout(c,0),e},n.winSizeSpy=function(e){return n.winSizeSpy=function(){return l},e=e||{throttle:100},l.on("resize",i(t,e.throttle||100))},n.fn.scrollSpy=function(e){return n.scrollSpy(n(this),e)}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1zLmpzIiwiaGVhZGVyLmpzIiwibWFpbi5qcyIsInBsYW50aWxsYV9wbHVnaW5fanF1ZXJ5LmpzIiwic2Nyb2xsc3B5LmpzIl0sIm5hbWVzIjpbImZvcm1fZm9jdXMiLCJpbnB1dCIsIiQiLCJwbGFjZWhvbGRlciIsInRoaXMiLCJhdHRyIiwiZWFjaCIsInZhbCIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNpYmxpbmdzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIm9uIiwiaGVhZGVyIiwiaGVhZGVyX3Njcm9sbCIsIndpbmRvdyIsInNjcm9sbCIsImN1cnJlbnRUb3AiLCJzY3JvbGxUb3AiLCJiZWZvcmVUb3AiLCJzbGlkZURvd24iLCJzbGlkZVVwIiwiYWN0aXZlTWVudSIsImhlYWRlcl9kcm9wZG93biIsImNsaWNrIiwic2xpZGVUb2dnbGUiLCJmYWRlT3V0IiwiZG9jdW1lbnQiLCJrZXl1cCIsImUiLCJrZXlDb2RlIiwiaGlkZSIsInNsaWRlTWVudSIsImVsZW1lbnQiLCJldmVudCIsInNsaWRlb3V0TWVudSIsInRvZ2dsZUNsYXNzIiwiZmluZCIsImluaXQiLCJkcm9wZG93bk1lbnUiLCJzY3JvbGxUb1RvcCIsImFjb3JkZW9uIiwibGxhbWFkYUFqYXgiLCJwZWdhbWVudG8iLCJoZWFkZXJGaXhlZCIsIlRvcCIsInNlZ3VpbWllbnRvIiwiZWxlbWVudF9saXN0YSIsImlkIiwiZW5sYWNlIiwiY2hpbGRyZW4iLCJoYXNoIiwic2Nyb2xsU3B5IiwiZWxlbW5ldCIsImV4aXQiLCJjc3MiLCJwYWRkaW5nLWxlZnQiLCJ0cmFuc2l0aW9uIiwiZGV0YWNoIiwiYW5pbWF0ZSIsImFjb3JkZW9uSGlqbyIsInBhcmVudCIsInVybCIsImRhdGEiLCJhamF4IiwiYXN5bmMiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJhIiwiaHRtbCIsImVycm9yIiwicmVhZHkiLCJmbiIsInBsdWdpbk5hbWUiLCJtZXRob2QiLCJkZWZhdWx0cyIsImZvbyIsInNldHRpbmdzIiwibWV0aG9kcyIsIm9wdGlvbnMiLCJleHRlbmQiLCJmb29fcHVibGljX21ldGhvZCIsImFwcGx5IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJqUXVlcnkiLCJmaW5kRWxlbWVudHMiLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJoaXRzIiwiZWxlbWVudHMiLCJpIiwiZWxUb3AiLCJvZmZzZXQiLCJlbExlZnQiLCJlbFJpZ2h0Iiwid2lkdGgiLCJlbEJvdHRvbSIsImhlaWdodCIsImlzSW50ZXJzZWN0IiwicHVzaCIsIm9uU2Nyb2xsIiwidGlja3MiLCJqV2luZG93Iiwic2Nyb2xsTGVmdCIsImludGVyc2VjdGlvbnMiLCJsYXN0VGljayIsInRyaWdnZXJIYW5kbGVyIiwiZWxlbWVudHNJblZpZXciLCJvbldpblNpemUiLCJ0cmlnZ2VyIiwidGhyb3R0bGUiLCJmdW5jIiwid2FpdCIsImNvbnRleHQiLCJhcmdzIiwicmVzdWx0IiwidGltZW91dCIsInByZXZpb3VzIiwibGF0ZXIiLCJsZWFkaW5nIiwiZ2V0VGltZSIsIm5vdyIsInJlbWFpbmluZyIsImNsZWFyVGltZW91dCIsInRyYWlsaW5nIiwic2V0VGltZW91dCIsImlzU3B5aW5nIiwiRGF0ZSIsInNlbGVjdG9yIiwib2Zmc2V0VG9wIiwib2Zmc2V0UmlnaHQiLCJvZmZzZXRCb3R0b20iLCJvZmZzZXRMZWZ0IiwidGhyb3R0bGVkU2Nyb2xsIiwicmVhZHlTY3JvbGwiLCJ3aW5TaXplU3B5Il0sIm1hcHBpbmdzIjoiQUFBQUEsV0FBQSxXQUVBLEdBQUFDLEdBQUFDLEVBQUEsc0JBQ0FDLEVBQUFELEVBQUFFLE1BQUFDLEtBQUEsY0FHQUosR0FBQUssS0FBQSxXQUNBLEdBQ0FILElBREFELEVBQUEsc0JBQ0FBLEVBQUFFLE1BQUFDLEtBQUEsZUFFQUgsR0FBQUUsTUFBQUcsTUFBQUMsT0FBQSxHQUFBQyxTQUFBTixFQUNBRCxFQUFBRSxNQUFBTSxTQUFBLGdCQUFBQyxTQUFBLGtCQUVBVCxF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QUFBLFNBQUFnSSxHQUNBaEMsRUFBQWhHLEdBQUEsU0FBQWdJLEdBQ0FSLEdBQUEsR0FJQUQsV0FBQVMsRUFBQSxHQUVBTixHQVFBckksRUFBQTRJLFdBQUEsU0FBQTlELEdBS0EsTUFKQTlFLEdBQUE0SSxXQUFBLFdBQUEsTUFBQWpDLElBQ0E3QixFQUFBQSxJQUNBcUMsU0FBQSxLQUVBUixFQUFBaEcsR0FBQSxTQUFBd0csRUFBQUYsRUFBQW5DLEVBQUFxQyxVQUFBLE9BY0FuSCxFQUFBdUUsR0FBQXBCLFVBQUEsU0FBQTJCLEdBQ0EsTUFBQTlFLEdBQUFtRCxVQUFBbkQsRUFBQUUsTUFBQTRFLEtBR0FTIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZm9ybV9mb2N1cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBpbnB1dCA9ICQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJyksXG4gICAgICAgIHBsYWNlaG9sZGVyID0gJCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpO1xuXG4gICAgLy9lbnRyYSBlbiBjYWRhIGlucHV0IHkgY29tcHJ1ZWJhIHNpIHRpZW5lIGFsZ3VuIHZhbG9yIG8gZWwgcGxhY2Vob2xkZXJcbiAgICBpbnB1dC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaW5wdXQgPSAkKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSAkKHRoaXMpLmF0dHIoJ3BsYWNlaG9sZGVyJyk7XG5cbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoID4gMCB8fCBwbGFjZWhvbGRlciAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmxhYmVsLWxhYmVsJykuYWRkQ2xhc3MoJ2Zsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmxhYmVsLWxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Zsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGlucHV0Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCAhPT0gMCB8fCBwbGFjZWhvbGRlciAhPT0gIHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmxhYmVsLWxhYmVsJykuYWRkQ2xhc3MoJ2Zsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmxhYmVsLWxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Zsb2F0aW5nLWxhYmVsJyk7XG5cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy9jdWFuZG8gZWwgaW5wdXQgdGllbmUgZWwgZm9jb1xuICAgIGlucHV0Lm9uKCdmb2N1c2luJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggPj0gMCB8fCBwbGFjZWhvbGRlciAhPT0gIHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmxhYmVsLWxhYmVsJykuYWRkQ2xhc3MoJ2Zsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmxhYmVsLWxhYmVsJykucmVtb3ZlQ2xhc3MoJ2Zsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8kKHRoaXMpLnNpYmxpbmdzKCcubGFiZWwtbGFiZWwnKS5hZGRDbGFzcygnZmxvYXRpbmctbGFiZWwnKTtcbiAgICB9KTtcblxuICAgIGlucHV0Lm9uKCdmb2N1c291dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoICE9PSAwICkge1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmxhYmVsLWxhYmVsJykuYWRkQ2xhc3MoJ2Zsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgIH1lbHNlIGlmICgkKHRoaXMpLmF0dHIoJ3BsYWNlaG9sZGVyJykgIT09ICB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5sYWJlbC1sYWJlbCcpLmFkZENsYXNzKCdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGFiZWwtbGFiZWwnKS5yZW1vdmVDbGFzcygnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cbn1cblxuZm9ybV9mb2N1cygpO1xuIiwiaGVhZGVyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgaGVhZGVyX3Njcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYmVmb3JlVG9wID0gMCxcbiAgICAgICAgICAgICAgICBjdXJyZW50VG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudFRvcCA8IHRoaXMuYmVmb3JlVG9wKSB7XG4gICAgICAgICAgICAgICAgJChcImhlYWRlclwiKS5zbGlkZURvd24oMzAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJChcImhlYWRlclwiKS5zbGlkZVVwKDMwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJlZm9yZVRvcCA9IGN1cnJlbnRUb3A7XG4gICAgICAgIH0pXG4gICAgfSxcblxuICAgIGFjdGl2ZU1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2hlYWRlciBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJ2hlYWRlciBsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG5cbiAgICBoZWFkZXJfZHJvcGRvd24gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnaGVhZGVyIGEnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZHJvcGRvd25NZW51Jykuc2xpZGVUb2dnbGUoMzAwKTtcbiAgICAgICAgfSkub24oJ2ZvY3Vzb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmRyb3Bkb3duTWVudScpLmZhZGVPdXQoMzAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkua2V5dXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PT0gMjcpe1xuICAgICAgICAgICAgICAgICQoJy5lbmxhY2VzIGEnKS5zaWJsaW5ncygnLmRyb3Bkb3duTWVudScpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHNsaWRlTWVudSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIC8vYWJyaXIgbWVudSBpenF1aWVyZGEgaWNvbm8gbWVudVxuICAgICAgICAkKGVsZW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgXHR2YXIgc2xpZGVvdXRNZW51ID0gJCgnLmVubGFjZXMnKSxcbiAgICAgICAgICAgICAgICBib2R5ID0gJCgnYm9keScpO1xuXG4gICAgICAgIFx0c2xpZGVvdXRNZW51LnRvZ2dsZUNsYXNzKFwib3BlblwiKTtcbiAgICAgICAgICAgICQoJy5zaWRlTmF2JykuYWRkQ2xhc3MoJ3NpZGUtb3ZlcmxheScpO1xuICAgICAgICAgICAgLy9ib2R5LmFwcGVuZCgnPGRpdiBjbGFzcz1cIm92ZXJsYXlcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICQoJy5uYXYtaWNvbicpLmFkZENsYXNzKCdpY29uLWFjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuc2lkZU5hdicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJ25hdicpLmZpbmQoJy5lbmxhY2VzJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3NpZGUtb3ZlcmxheScpO1xuICAgICAgICAgICAgLy8kKCcub3ZlcmxheScpLnJlbW92ZSgpO1xuICAgICAgICBcdCQoJy5uYXYtaWNvbicpLnJlbW92ZUNsYXNzKCdpY29uLWFjdGl2ZScpO1xuICAgICAgICB9KTtcblxuXG4gICAgfSxcblxuICAgIGhlYWRlcl9zY3JvbGwoKTtcbiAgICBoZWFkZXJfZHJvcGRvd24oKTtcbiAgICBhY3RpdmVNZW51KCk7XG4gICAgc2xpZGVNZW51KCcjYnRuLW1lbnUnKTtcbn1cblxuaGVhZGVyKCk7XG4iLCJpbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIC8vaGVhZGVyRml4ZWQoJyNoZWFkZXInKTtcbiAgICBkcm9wZG93bk1lbnUoJy5oZWFkZXJfX25hdl9fbWVudUhlYWRlcl9fbGlzdEl0ZW1fX2VubGFjZScpO1xuICAgIC8vc2xpZGVNZW51KCcjYnRuLW1lbnUnKTtcbiAgICBzY3JvbGxUb1RvcCgnLnNjcm9sbFRvcCcpO1xuICAgIGFjdGl2ZU1lbnUoJy5oZWFkZXJfX25hdl9fbWVudUhlYWRlcl9fbGlzdEl0ZW0nKTtcbiAgICBhY29yZGVvbignLmFjb3JkZW9uLXRpdGxlJywgJy5hY29yZGVvbi1wYXJhZ3JhcGgnKTtcbiAgICBsbGFtYWRhQWpheCgnLmxpLWl0ZW0nKTtcbiAgICBwZWdhbWVudG8oJy5jb250ZW50Zml4ZWQnKTtcbn0sXG5cbmhlYWRlckZpeGVkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICB2YXIgaGVhZGVyID0gJ2hlYWRlcl9maXhlZCc7XG5cbiAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gMzApe1xuICAgICAgICAgICAgJChlbGVtZW50KS5hZGRDbGFzcyhoZWFkZXIpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoaGVhZGVyKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSxcblxucGVnYW1lbnRvID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIFRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcblxuICAgICAgICBpZiAoVG9wID4gMzApIHtcbiAgICAgICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoJ2ZpeGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xuICAgICAgICB9XG4gICAgfSlcbn0sXG5cbnNlZ3VpbWllbnRvID0gZnVuY3Rpb24gKGVsZW1lbnQsIGVsZW1lbnRfbGlzdGEpIHtcbiAgICAkKGVsZW1lbnQpLm9uKCdzY3JvbGxTcHk6ZW50ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlkID0gJyMnICsgJCh0aGlzKS5hdHRyKCdpZCcpO1xuXG4gICAgICAgICQoZWxlbWVudF9saXN0YSkuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGVubGFjZSA9ICQodGhpcykuY2hpbGRyZW4oJ2EnKSxcbiAgICAgICAgICAgICAgICBoYXNoID0gZW5sYWNlLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgIGlmIChpZCA9PSBoYXNoKSB7XG4gICAgICAgICAgICAgICAgJChlbGVtZW50X2xpc3RhKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSk7XG5cbiAgICAkKGVsZW1lbnQpLm9uKCdzY3JvbGxTcHk6ZXhpdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaWQgPSAnIycgKyAkKHRoaXMpLmF0dHIoJ2lkJyk7XG5cbiAgICAgICAgJChlbGVtZW50X2xpc3RhKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgZW5sYWNlID0gJCh0aGlzKS5jaGlsZHJlbignYScpLFxuICAgICAgICAgICAgICAgIGhhc2ggPSBlbmxhY2UuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgaWYgKGlkID09IGhhc2gpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KTtcblxuICAgICQoZWxlbWVudCkuc2Nyb2xsU3B5KCk7XG59LFxuXG5kcm9wZG93bk1lbnUgPSBmdW5jdGlvbiAoZWxlbW5ldCkge1xuICAgIHZhciBrZXlkb3duID0gJCgnLmhlYWRlcl9fbmF2X19tZW51SGVhZGVyX19saXN0SXRlbV9fZW5sYWNlJyk7XG5cbiAgICAkKGVsZW1uZXQpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmRyb3Bkb3duTWVudScpLnNsaWRlVG9nZ2xlKDMwMCk7XG4gICAgfSkub24oJ2ZvY3Vzb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZHJvcGRvd25NZW51JykuZmFkZU91dCgzMDApO1xuICAgIH0pO1xuXG4gICAgLy8gJChkb2N1bWVudCkua2V5ZG93bihmdW5jdGlvbiAoZSkge1xuICAgIC8vICAgICBpZihlLmtleUNvZGUgPT09IDI3KXtcbiAgICAvLyAgICAgICAgICQoa2V5ZG93bikuc2libGluZ3MoJy5kcm9wZG93bk1lbnUnKS5oaWRlKCk7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9KTtcbn0sXG5cbnNsaWRlTWVudSA9IGZ1bmN0aW9uIChzbGlkZU1lbnUsIGV4aXQpIHtcbiAgICAvL2FicmlyIG1lbnUgaXpxdWllcmRhIGljb25vIG1lbnVcbiAgICAkKHNsaWRlTWVudSkub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpe1xuICAgIFx0dmFyIHNsaWRlb3V0TWVudSA9ICQoJy5lbmxhY2VzJyksXG4gICAgICAgICAgICBib2R5ID0gJCgnYm9keScpO1xuXG4gICAgXHRzbGlkZW91dE1lbnUudG9nZ2xlQ2xhc3MoXCJvcGVuXCIpO1xuXG4gICAgICAgIC8vYm9keS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJvdmVybGF5XCI+PC9kaXY+JykuY3NzKHsncGFkZGluZy1sZWZ0JzogJzEzMHB4JywgJ3RyYW5zaXRpb24nOiAnYWxsIDAuM3MnfSk7XG4gICAgfSk7XG5cbiAgICAvL2NlcnJhciBtZW51IGVuIGxhIHhcbiAgICAkKGV4aXQpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNsaWRlb3V0TWVudSA9ICQoJyNidG4tbWVudScpO1xuXG4gICAgXHRzbGlkZW91dE1lbnUucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xuICAgICAgICAkKCdib2R5JykuY3NzKHsncGFkZGluZy1sZWZ0JzogJzAnLCAndHJhbnNpdGlvbic6ICdhbGwgMC4zcyd9KTtcblxuICAgICAgICAkKCc8ZGl2IGNsYXNzPVwib3ZlcmxheVwiPjwvZGl2PicpLmRldGFjaCgpO1xuXG4gICAgfSk7XG59LFxuXG5zY3JvbGxUb1RvcCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDgwICl7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLnNsaWRlRG93bigpO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLnNsaWRlVXAoKTtcbiAgICAgICAgfVxuICAgIH0pLFxuXG4gICAgJChlbGVtZW50KS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogMFxuICAgICAgICB9LCA0MDApO1xuICAgIH0pO1xufSxcblxuYWN0aXZlTWVudSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgJChlbGVtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcbn0sXG5cbmFjb3JkZW9uID0gZnVuY3Rpb24gKGFjb3JkZW9uLCBhY29yZGVvbkhpam8gKSB7XG4gICAgJChhY29yZGVvbikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKGFjb3JkZW9uSGlqbykuc2xpZGVUb2dnbGUoMTAwKTtcbiAgICAgICAgLy9jaWVycmEgZWwgYWNvcmRlb24gYWJpZXJ0b1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCkuZmluZChhY29yZGVvbkhpam8pLnNsaWRlVXAoKTtcblxuICAgICAgICAvL2NhbWJpbyBkZSBpY29ub1xuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCkudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93biBmYS1jaGV2cm9uLXVwJyk7XG4gICAgICAgIC8vY2FtYmlvIGRlIGljb25vIGN1YW5kbyBjaWVycmEgYWNvcmRlcm9uIGFiaWVydG9cbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJ2knKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCcpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgICB9KTtcbn0sXG5cblxuLy9MbGFtYWRhIGFqYXggcGFyYSBsYSBndWlhIGRlIGVzdGlsb1xubGxhbWFkYUFqYXggPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICQoZWxlbWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciB1cmwgPSAkKHRoaXMpLmRhdGEoXCJocmVmXCIpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IHVybCArICcuaHRtbCcsXG4gICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihhKXtcbiAgICAgICAgICAgICAgICAkKCcuY29udGVudF9jb250YWluZXInKS5odG1sKGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihhKXtcbiAgICAgICAgICAgICAgICAkKCcuY29udGVudF9jb250YWluZXInKS5odG1sKCc8aDQ+TG8gc2VudGltb3MsIHNlIHByb2R1am8gdW4gZXJyb3I8L2g0PicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH0pO1xufSxcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgaW5pdCgpO1xuXG59KTtcbiIsIi8vIHJlbWVtYmVyIHRvIGNoYW5nZSBldmVyeSBpbnN0YW5jZSBvZiBcInBsdWdpbk5hbWVcIlxuLy8gdG8gdGhlIG5hbWUgb2YgeW91ciBwbHVnaW4hXG47KGZ1bmN0aW9uKCQpIHtcbiBcbiAgICAvLyBoZXJlIGl0IGdvZXMhXG4gICAgJC5mbi5wbHVnaW5OYW1lID0gZnVuY3Rpb24obWV0aG9kKSB7XG4gXG4gICAgICAgIC8vIHBsdWdpbidzIGRlZmF1bHQgb3B0aW9uc1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gXG4gICAgICAgICAgICBmb286ICdiYXInXG4gXG4gICAgICAgIH1cbiBcbiAgICAgICAgLy8gdGhpcyB3aWxsIGhvbGQgdGhlIG1lcmdlZCBkZWZhdWx0IGFuZCB1c2VyLXByb3ZpZGVkIHByb3BlcnRpZXNcbiAgICAgICAgLy8geW91IHdpbGwgaGF2ZSB0byBhY2Nlc3MgdGhlIHBsdWdpbidzIHByb3BlcnRpZXMgdGhyb3VnaCB0aGlzIG9iamVjdCFcbiAgICAgICAgLy8gc2V0dGluZ3MucHJvcGVydHlOYW1lXG4gICAgICAgIHZhciBzZXR0aW5ncyA9IHt9XG4gXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RzXG4gICAgICAgIC8vIHRvIGtlZXAgdGhlICQuZm4gbmFtZXNwYWNlIHVuY2x1dHRlcmVkLCBjb2xsZWN0IGFsbFxuICAgICAgICAvLyBvZiB0aGUgcGx1Z2luJ3MgbWV0aG9kcyBpbiBhbiBvYmplY3QgbGl0ZXJhbCBhbmQgY2FsbFxuICAgICAgICAvLyB0aGVtIGJ5IHBhc3NpbmcgdGhlIHN0cmluZyBuYW1lIG9mIHRoZSBtZXRob2QgdG8gdGhlIHBsdWdpblxuICAgICAgICAvL1xuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kcyBjYW4gYmUgY2FsbGVkIGFzXG4gICAgICAgIC8vICQoc2VsZWN0b3IpLnBsdWdpbk5hbWUoJ21ldGhvZE5hbWUnLCBhcmcxLCBhcmcyLCAuLi4gYXJnbilcbiAgICAgICAgLy8gd2hlcmUgXCJwbHVnaW5OYW1lXCIgaXMgdGhlIG5hbWUgb2YgeW91ciBwbHVnaW4gYW5kIFwibWV0aG9kTmFtZVwiXG4gICAgICAgIC8vaXMgdGhlIG5hbWUgb2YgYSBmdW5jdGlvbiBhdmFpbGFibGUgaW5cbiAgICAgICAgLy8gdGhlIFwibWV0aG9kc1wiIG9iamVjdCBiZWxvdztcbiAgICAgICAgLy8gYXJnMSAuLi4gYXJnbiBhcmUgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byB0aGUgbWV0aG9kXG4gICAgICAgIC8vXG4gICAgICAgIC8vIG9yLCBmcm9tIHdpdGhpbiB0aGUgcGx1Z2luIGl0c2VsZiwgYXNcbiAgICAgICAgLy8gbWV0aG9kcy5tZXRob2ROYW1lKGFyZzEsIGFyZzIsIC4uLiBhcmduKVxuICAgICAgICAvLyB3aGVyZSBcIm1ldGhvZE5hbWVcIiBpcyB0aGUgbmFtZSBvZiBhIGZ1bmN0aW9uIGF2YWlsYWJsZVxuICAgICAgICAvLyBpbiB0aGUgXCJtZXRob2RzXCIgb2JqZWN0IGJlbG93XG4gICAgICAgIHZhciBtZXRob2RzID0ge1xuIFxuICAgICAgICAgICAgLy8gdGhpcyB0aGUgY29uc3RydWN0b3IgbWV0aG9kIHRoYXQgZ2V0cyBjYWxsZWQgd2hlblxuICAgICAgICAgICAgLy8gdGhlIG9iamVjdCBpcyBjcmVhdGVkXG4gICAgICAgICAgICBpbml0IDogZnVuY3Rpb24ob3B0aW9ucykge1xuIFxuICAgICAgICAgICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBhbGwgdGhlIERPTSBlbGVtZW50cyB3ZSBhcmVcbiAgICAgICAgICAgICAgICAvLyBhdHRhY2hpbmcgdGhlIHBsdWdpbiB0b1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBwbHVnaW4ncyBmaW5hbCBwcm9wZXJ0aWVzIGFyZSB0aGUgbWVyZ2VkIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHVzZXItcHJvdmlkZWQgcHJvcGVydGllcyAoaWYgYW55KVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGhhcyB0aGUgYWR2YW50YWdlIG9mIG5vdCBwb2xsdXRpbmcgdGhlIGRlZmF1bHRzLFxuICAgICAgICAgICAgICAgICAgICAvLyBtYWtpbmcgdGhlIHNhbWUgaW5zdGFjZSByZS11c2FibGUgd2l0aFxuICAgICAgICAgICAgICAgICAgICAvLyBuZXcgb3B0aW9uczsgdGhhbmtzIHRvIFN0ZXZlbiBCbGFjayBmb3Igc3VnZ2VzdGluZyB0aGlzXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKVxuIFxuICAgICAgICAgICAgICAgICAgICAvLyBcImVsZW1lbnRcIiBob2xkcyB0aGUgalF1ZXJ5IG9iamVjdCBvZiB0aGUgY3VycmVudCBET00gZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9ICQodGhpcyk7XG4gXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvZGUgZ29lcyBoZXJlXG4gXG4gICAgICAgICAgICAgICAgfSk7XG4gXG4gICAgICAgICAgICB9LFxuIFxuICAgICAgICAgICAgLy8gYSBwdWJsaWMgbWV0aG9kLiBmb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcyBvbmx5IC0gcmVtb3ZlIGl0IVxuICAgICAgICAgICAgZm9vX3B1YmxpY19tZXRob2Q6IGZ1bmN0aW9uKCkge1xuIFxuICAgICAgICAgICAgICAgIC8vIGNvZGUgZ29lcyBoZXJlXG4gXG4gICAgICAgICAgICB9XG4gXG4gICAgICAgIH1cbiBcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIC8vIHRoZXNlIG1ldGhvZHMgY2FuIGJlIGNhbGxlZCBvbmx5IGZyb20gd2l0aGluIHRoZSBwbHVnaW5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzIGNhbiBiZSBjYWxsZWQgYXNcbiAgICAgICAgLy8gaGVscGVycy5tZXRob2ROYW1lKGFyZzEsIGFyZzIsIC4uLiBhcmduKVxuICAgICAgICAvLyB3aGVyZSBcIm1ldGhvZE5hbWVcIiBpcyB0aGUgbmFtZSBvZiBhIGZ1bmN0aW9uIGF2YWlsYWJsZSBpblxuICAgICAgICAvLyB0aGUgXCJoZWxwZXJzXCIgb2JqZWN0IGJlbG93OyBhcmcxIC4uLiBhcmduIGFyZSBhcmd1bWVudHMgdG9cbiAgICAgICAgLy8gYmUgcGFzc2VkIHRvIHRoZSBtZXRob2RcbiAgICAgICAgdmFyIGhlbHBlcnMgPSB7XG4gXG4gICAgICAgICAgICAvLyBhIHByaXZhdGUgbWV0aG9kLiBmb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcyBvbmx5IC0gcmVtb3ZlIGl0IVxuICAgICAgICAgICAgZm9vX3ByaXZhdGVfbWV0aG9kOiBmdW5jdGlvbigpIHtcbiBcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGdvZXMgaGVyZVxuIFxuICAgICAgICAgICAgfVxuIFxuICAgICAgICB9XG4gXG4gICAgICAgIC8vIGlmIGEgbWV0aG9kIGFzIHRoZSBnaXZlbiBhcmd1bWVudCBleGlzdHNcbiAgICAgICAgaWYgKG1ldGhvZHNbbWV0aG9kXSkge1xuIFxuICAgICAgICAgICAgLy8gY2FsbCB0aGUgcmVzcGVjdGl2ZSBtZXRob2RcbiAgICAgICAgICAgIHJldHVybiBtZXRob2RzW21ldGhvZF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gXG4gICAgICAgIC8vIGlmIGFuIG9iamVjdCBpcyBnaXZlbiBhcyBtZXRob2QgT1Igbm90aGluZyBpcyBnaXZlbiBhcyBhcmd1bWVudFxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnIHx8ICFtZXRob2QpIHtcbiBcbiAgICAgICAgICAgIC8vIGNhbGwgdGhlIGluaXRpYWxpemF0aW9uIG1ldGhvZFxuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuIFxuICAgICAgICAvLyBvdGhlcndpc2VcbiAgICAgICAgfSBlbHNlIHtcbiBcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgYW4gZXJyb3JcbiAgICAgICAgICAgICQuZXJyb3IoICdNZXRob2QgXCInICsgIG1ldGhvZCArICdcIiBkb2VzIG5vdCBleGlzdCBpbiBwbHVnaW5OYW1lIHBsdWdpbiEnKTtcbiBcbiAgICAgICAgfVxuIFxuICAgIH1cbiBcbn0pKGpRdWVyeSk7IiwiLy8gcmVtZW1iZXIgdG8gY2hhbmdlIGV2ZXJ5IGluc3RhbmNlIG9mIFwicGx1Z2luTmFtZVwiXG4vLyB0byB0aGUgbmFtZSBvZiB5b3VyIHBsdWdpbiFcbjsoZnVuY3Rpb24oJCkge1xuXG5cdHZhciBqV2luZG93ID0gJCh3aW5kb3cpO1xuXHR2YXIgZWxlbWVudHMgPSBbXTtcblx0dmFyIGVsZW1lbnRzSW5WaWV3ID0gW107XG5cdHZhciBpc1NweWluZyA9IGZhbHNlO1xuXHR2YXIgdGlja3MgPSAwO1xuXHR2YXIgb2Zmc2V0ID0ge1xuXHRcdHRvcCA6IDAsXG5cdFx0cmlnaHQgOiAwLFxuXHRcdGJvdHRvbSA6IDAsXG5cdFx0bGVmdCA6IDAsXG5cdH1cblxuXHQvKipcblx0ICogRmluZCBlbGVtZW50cyB0aGF0IGFyZSB3aXRoaW4gdGhlIGJvdW5kYXJ5XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB0b3Bcblx0ICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b21cblx0ICogQHBhcmFtIHtudW1iZXJ9IGxlZnRcblx0ICogQHJldHVybiB7alF1ZXJ5fVx0XHRBIGNvbGxlY3Rpb24gb2YgZWxlbWVudHNcblx0ICovXG5cdGZ1bmN0aW9uIGZpbmRFbGVtZW50cyh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpIHtcblx0XHR2YXIgaGl0cyA9ICQoKTtcblx0XHQkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcblx0XHRcdHZhciBlbFRvcCA9IGVsZW1lbnQub2Zmc2V0KCkudG9wLFxuXHRcdFx0XHRlbExlZnQgPSBlbGVtZW50Lm9mZnNldCgpLmxlZnQsXG5cdFx0XHRcdGVsUmlnaHQgPSBlbExlZnQgKyBlbGVtZW50LndpZHRoKCksXG5cdFx0XHRcdGVsQm90dG9tID0gZWxUb3AgKyBlbGVtZW50LmhlaWdodCgpO1xuXG5cdFx0XHR2YXIgaXNJbnRlcnNlY3QgPSAhKGVsTGVmdCA+IHJpZ2h0IHx8XG5cdFx0XHRcdGVsUmlnaHQgPCBsZWZ0IHx8XG5cdFx0XHRcdGVsVG9wID4gYm90dG9tIHx8XG5cdFx0XHRcdGVsQm90dG9tIDwgdG9wKTtcblxuXHRcdFx0aWYgKGlzSW50ZXJzZWN0KSB7XG5cdFx0XHRcdGhpdHMucHVzaChlbGVtZW50KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBoaXRzO1xuXHR9XG5cblx0LyoqXG5cdCAqIENhbGxlZCB3aGVuIHRoZSB1c2VyIHNjcm9sbHMgdGhlIHdpbmRvd1xuXHQgKi9cblx0ZnVuY3Rpb24gb25TY3JvbGwoKSB7XG5cdFx0Ly8gdW5pcXVlIHRpY2sgaWRcblx0XHQrK3RpY2tzO1xuXG5cdFx0Ly8gdmlld3BvcnQgcmVjdGFuZ2xlXG5cdFx0dmFyIHRvcCA9IGpXaW5kb3cuc2Nyb2xsVG9wKCksXG5cdFx0XHRsZWZ0ID0galdpbmRvdy5zY3JvbGxMZWZ0KCksXG5cdFx0XHRyaWdodCA9IGxlZnQgKyBqV2luZG93LndpZHRoKCksXG5cdFx0XHRib3R0b20gPSB0b3AgKyBqV2luZG93LmhlaWdodCgpO1xuXG5cdFx0Ly8gZGV0ZXJtaW5lIHdoaWNoIGVsZW1lbnRzIGFyZSBpbiB2aWV3XG5cdFx0dmFyIGludGVyc2VjdGlvbnMgPSBmaW5kRWxlbWVudHModG9wK29mZnNldC50b3AsIHJpZ2h0K29mZnNldC5yaWdodCwgYm90dG9tK29mZnNldC5ib3R0b20sIGxlZnQrb2Zmc2V0LmxlZnQpO1xuXHRcdCQuZWFjaChpbnRlcnNlY3Rpb25zLCBmdW5jdGlvbihpLCBlbGVtZW50KSB7XG5cdFx0XHR2YXIgbGFzdFRpY2sgPSBlbGVtZW50LmRhdGEoJ3Njcm9sbFNweTp0aWNrcycpO1xuXHRcdFx0aWYgKHR5cGVvZiBsYXN0VGljayAhPSAnbnVtYmVyJykge1xuXHRcdFx0XHQvLyBlbnRlcmVkIGludG8gdmlld1xuXHRcdFx0XHRlbGVtZW50LnRyaWdnZXJIYW5kbGVyKCdzY3JvbGxTcHk6ZW50ZXInKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gdXBkYXRlIHRpY2sgaWRcblx0XHRcdGVsZW1lbnQuZGF0YSgnc2Nyb2xsU3B5OnRpY2tzJywgdGlja3MpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gZGV0ZXJtaW5lIHdoaWNoIGVsZW1lbnRzIGFyZSBubyBsb25nZXIgaW4gdmlld1xuXHRcdCQuZWFjaChlbGVtZW50c0luVmlldywgZnVuY3Rpb24oaSwgZWxlbWVudCkge1xuXHRcdFx0dmFyIGxhc3RUaWNrID0gZWxlbWVudC5kYXRhKCdzY3JvbGxTcHk6dGlja3MnKTtcblx0XHRcdGlmICh0eXBlb2YgbGFzdFRpY2sgPT0gJ251bWJlcicgJiYgbGFzdFRpY2sgIT09IHRpY2tzKSB7XG5cdFx0XHRcdC8vIGV4aXRlZCBmcm9tIHZpZXdcblx0XHRcdFx0ZWxlbWVudC50cmlnZ2VySGFuZGxlcignc2Nyb2xsU3B5OmV4aXQnKTtcblx0XHRcdFx0ZWxlbWVudC5kYXRhKCdzY3JvbGxTcHk6dGlja3MnLCBudWxsKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIHJlbWVtYmVyIGVsZW1lbnRzIGluIHZpZXcgZm9yIG5leHQgdGlja1xuXHRcdGVsZW1lbnRzSW5WaWV3ID0gaW50ZXJzZWN0aW9ucztcblx0fVxuXG5cdC8qKlxuXHQgKiBDYWxsZWQgd2hlbiB3aW5kb3cgaXMgcmVzaXplZFxuXHQqL1xuXHRmdW5jdGlvbiBvbldpblNpemUoKSB7XG5cdFx0aldpbmRvdy50cmlnZ2VyKCdzY3JvbGxTcHk6d2luU2l6ZScpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aW1lIGluIG1zXG4gICAqIEBsaWNlbnNlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvbWFzdGVyL0xJQ0VOU0Vcblx0ICogQHR5cGUge2Z1bmN0aW9ufVxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9XG5cdCAqL1xuXHR2YXIgZ2V0VGltZSA9IChEYXRlLm5vdyB8fCBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHR9KTtcblxuXHQvKipcblx0ICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXG5cdCAqIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuXHQgKiBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XG5cdCAqIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXG5cdCAqIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuXHQgKiBAbGljZW5zZSBodHRwczovL3Jhdy5naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL21hc3Rlci9MSUNFTlNFXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcblx0ICogQHBhcmFtIHtudW1iZXJ9IHdhaXRcblx0ICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn1cblx0ICovXG5cdGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0XHR2YXIgY29udGV4dCwgYXJncywgcmVzdWx0O1xuXHRcdHZhciB0aW1lb3V0ID0gbnVsbDtcblx0XHR2YXIgcHJldmlvdXMgPSAwO1xuXHRcdG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cdFx0dmFyIGxhdGVyID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IGdldFRpbWUoKTtcblx0XHRcdHRpbWVvdXQgPSBudWxsO1xuXHRcdFx0cmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0XHRcdGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0XHR9O1xuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgbm93ID0gZ2V0VGltZSgpO1xuXHRcdFx0aWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcblx0XHRcdHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcblx0XHRcdGNvbnRleHQgPSB0aGlzO1xuXHRcdFx0YXJncyA9IGFyZ3VtZW50cztcblx0XHRcdGlmIChyZW1haW5pbmcgPD0gMCkge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0XHRcdHRpbWVvdXQgPSBudWxsO1xuXHRcdFx0XHRwcmV2aW91cyA9IG5vdztcblx0XHRcdFx0cmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0XHRcdFx0Y29udGV4dCA9IGFyZ3MgPSBudWxsO1xuXHRcdFx0fSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuXHRcdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fTtcblx0fTtcblxuXHQvKipcblx0ICogRW5hYmxlcyBTY3JvbGxTcHkgdXNpbmcgYSBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge2pRdWVyeXxzdHJpbmd9IHNlbGVjdG9yICBUaGUgZWxlbWVudHMgY29sbGVjdGlvbiwgb3IgYSBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcdE9wdGlvbmFsLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRocm90dGxlIDogbnVtYmVyIC0+IHNjcm9sbHNweSB0aHJvdHRsaW5nLiBEZWZhdWx0OiAxMDAgbXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRUb3AgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gdG9wLiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0UmlnaHQgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gcmlnaHQuIERlZmF1bHQ6IDBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRCb3R0b20gOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gYm90dG9tLiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0TGVmdCA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSBsZWZ0LiBEZWZhdWx0OiAwXG5cdCAqIEByZXR1cm5zIHtqUXVlcnl9XG5cdCAqL1xuXHQkLnNjcm9sbFNweSA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBvcHRpb25zKSB7XG5cdFx0c2VsZWN0b3IgPSAkKHNlbGVjdG9yKTtcblx0XHRzZWxlY3Rvci5lYWNoKGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcblx0XHRcdGVsZW1lbnRzLnB1c2goJChlbGVtZW50KSk7XG5cdFx0fSk7XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge1xuXHRcdFx0dGhyb3R0bGU6IDEwMFxuXHRcdH07XG5cblx0XHRvZmZzZXQudG9wID0gb3B0aW9ucy5vZmZzZXRUb3AgfHwgMDtcblx0XHRvZmZzZXQucmlnaHQgPSBvcHRpb25zLm9mZnNldFJpZ2h0IHx8IDA7XG5cdFx0b2Zmc2V0LmJvdHRvbSA9IG9wdGlvbnMub2Zmc2V0Qm90dG9tIHx8IDA7XG5cdFx0b2Zmc2V0LmxlZnQgPSBvcHRpb25zLm9mZnNldExlZnQgfHwgMDtcblxuXHRcdHZhciB0aHJvdHRsZWRTY3JvbGwgPSB0aHJvdHRsZShvblNjcm9sbCwgb3B0aW9ucy50aHJvdHRsZSB8fCAxMDApO1xuXHRcdHZhciByZWFkeVNjcm9sbCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQkKGRvY3VtZW50KS5yZWFkeSh0aHJvdHRsZWRTY3JvbGwpO1xuXHRcdH07XG5cblx0XHRpZiAoIWlzU3B5aW5nKSB7XG5cdFx0XHRqV2luZG93Lm9uKCdzY3JvbGwnLCByZWFkeVNjcm9sbCk7XG5cdFx0XHRqV2luZG93Lm9uKCdyZXNpemUnLCByZWFkeVNjcm9sbCk7XG5cdFx0XHRpc1NweWluZyA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gcGVyZm9ybSBhIHNjYW4gb25jZSwgYWZ0ZXIgY3VycmVudCBleGVjdXRpb24gY29udGV4dCwgYW5kIGFmdGVyIGRvbSBpcyByZWFkeVxuXHRcdHNldFRpbWVvdXQocmVhZHlTY3JvbGwsIDApO1xuXG5cdFx0cmV0dXJuIHNlbGVjdG9yO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBMaXN0ZW4gZm9yIHdpbmRvdyByZXNpemUgZXZlbnRzXG5cdCAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1x0XHRcdFx0XHRcdE9wdGlvbmFsLiBTZXQgeyB0aHJvdHRsZTogbnVtYmVyIH0gdG8gY2hhbmdlIHRocm90dGxpbmcuIERlZmF1bHQ6IDEwMCBtc1xuXHQgKiBAcmV0dXJucyB7alF1ZXJ5fVx0XHQkKHdpbmRvdylcblx0ICovXG5cdCQud2luU2l6ZVNweSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHQkLndpblNpemVTcHkgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGpXaW5kb3c7IH07IC8vIGxvY2sgZnJvbSBtdWx0aXBsZSBjYWxsc1xuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHtcblx0XHRcdHRocm90dGxlOiAxMDBcblx0XHR9O1xuXHRcdHJldHVybiBqV2luZG93Lm9uKCdyZXNpemUnLCB0aHJvdHRsZShvbldpblNpemUsIG9wdGlvbnMudGhyb3R0bGUgfHwgMTAwKSk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEVuYWJsZXMgU2Nyb2xsU3B5IG9uIGEgY29sbGVjdGlvbiBvZiBlbGVtZW50c1xuXHQgKiBlLmcuICQoJy5zY3JvbGxTcHknKS5zY3JvbGxTcHkoKVxuXHQgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcdE9wdGlvbmFsLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRocm90dGxlIDogbnVtYmVyIC0+IHNjcm9sbHNweSB0aHJvdHRsaW5nLiBEZWZhdWx0OiAxMDAgbXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRUb3AgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gdG9wLiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0UmlnaHQgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gcmlnaHQuIERlZmF1bHQ6IDBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRCb3R0b20gOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gYm90dG9tLiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0TGVmdCA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSBsZWZ0LiBEZWZhdWx0OiAwXG5cdCAqIEByZXR1cm5zIHtqUXVlcnl9XG5cdCAqL1xuXHQkLmZuLnNjcm9sbFNweSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gJC5zY3JvbGxTcHkoJCh0aGlzKSwgb3B0aW9ucyk7XG5cdH07XG5cbn0pKGpRdWVyeSk7Il19
