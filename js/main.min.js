form_focus=function(){var e=$('input[type="text"]'),n=$(this).attr("placeholder");e.each(function(){var e=($('input[type="text"]'),$(this).attr("placeholder"));$(this).val().length>0||void 0!==e?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")}),e.on("change",function(){0!==$(this).val().length||void 0!==n?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")}),e.on("focusin",function(){$(this).val().length>=0||void 0!==n?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")}),e.on("focusout",function(){0!==$(this).val().length?$(this).siblings(".label-label").addClass("floating-label"):void 0!==$(this).attr("placeholder")?$(this).siblings(".label-label").addClass("floating-label"):$(this).siblings(".label-label").removeClass("floating-label")})},form_focus(),header=function(){header_scroll=function(){$(window).scroll(function(){var e=$(window).scrollTop();e<this.beforeTop?$("header").slideDown(300):$("header").slideUp(300),this.beforeTop=e})},activeMenu=function(){$("header li").on("click",function(){$("header li").removeClass("active"),$(this).addClass("active")})},header_dropdown=function(){$("header a").click(function(){$(this).siblings(".dropdownMenu").slideToggle(300)}).on("focusout",function(){$(this).siblings(".dropdownMenu").fadeOut(300)}),$(document).keyup(function(e){27===e.keyCode&&$(".enlaces a").siblings(".dropdownMenu").hide()})},header_slideMenu=function(){var e=$(".enlaces"),n=$("body"),o=$(".nav-icon, #btn-menu"),t=$(".sideNav");o.on("click",function(n){e.toggleClass("open"),t.addClass("side-overlay"),$("body").css("overflow","hidden"),o.addClass("icon-active")}),t.click(function(){e.removeClass("open"),t.removeClass("side-overlay"),n.removeAttr("style"),o.removeClass("icon-active")})},header_scroll(),header_dropdown(),activeMenu(),header_slideMenu()},header(),init=function(){dropdownMenu(".header__nav__menuHeader__listItem__enlace"),scrollToTop(".scrollTop"),activeMenu(".header__nav__menuHeader__listItem"),acordeon(".acordeon-title",".acordeon-paragraph"),llamadaAjax(".li-item"),pegamento(".contentfixed")},headerFixed=function(e){var n="header_fixed";$(window).on("scroll",function(){$(window).scrollTop()>30?$(e).addClass(n):$(e).removeClass(n)})},pegamento=function(e){$(window).scroll(function(){var n=$(window).scrollTop();n>30?$(e).addClass("fixed"):$(e).removeClass("fixed")})},seguimiento=function(e,n){$(e).on("scrollSpy:enter",function(){var e="#"+$(this).attr("id");$(n).each(function(){var o=$(this).children("a"),t=o.attr("href");e==t&&($(n).removeClass("active"),$(this).addClass("active"))})}),$(e).on("scrollSpy:exit",function(){var e="#"+$(this).attr("id");$(n).each(function(){var n=$(this).children("a"),o=n.attr("href");e==o&&$(this).removeClass("active")})}),$(e).scrollSpy()},dropdownMenu=function(e){$(".header__nav__menuHeader__listItem__enlace");$(e).click(function(){$(this).siblings(".dropdownMenu").slideToggle(300)}).on("focusout",function(){$(this).siblings(".dropdownMenu").fadeOut(300)})},slideMenu=function(e,n){$(e).on("click",function(e){var n=$(".enlaces");$("body");n.toggleClass("open")}),$(n).on("click",function(){var e=$("#btn-menu");e.removeClass("open"),$("body").css({"padding-left":"0",transition:"all 0.3s"}),$('<div class="overlay"></div>').detach()})},scrollToTop=function(e){$(window).on("scroll",function(){$(window).scrollTop()>80?$(e).slideDown():$(e).slideUp()}),$(e).click(function(){$("body").animate({scrollTop:0},400)})},activeMenu=function(e){$(e).on("click",function(){$(e).removeClass("active"),$(this).addClass("active")})},acordeon=function(e,n){$(e).click(function(){$(this).siblings(n).slideToggle(100),$(this).parent().siblings().find(n).slideUp(),$(this).children().toggleClass("fa-chevron-down fa-chevron-up"),$(this).parent().siblings().find("i").removeClass("fa-chevron-up").addClass("fa-chevron-down")})},llamadaAjax=function(e){$(e).on("click",function(e){var n=$(this).data("href");$.ajax({url:n+".html",async:!0,dataType:"html",success:function(e){$(".content_container").html(e)},error:function(e){$(".content_container").html("<h4>Lo sentimos, se produjo un error</h4>")}})})},$(document).ready(function(){init()}),function(e){e.fn.pluginName=function(n){var o={foo:"bar"},t={},i={init:function(n){return this.each(function(){t=e.extend({},o,n);e(this)})},foo_public_method:function(){}};return i[n]?i[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error('Method "'+n+'" does not exist in pluginName plugin!'):i.init.apply(this,arguments)}}(jQuery),function(e){function n(n,o,t,i){var l=e();return e.each(a,function(e,a){var s=a.offset().top,r=a.offset().left,c=r+a.width(),d=s+a.height(),u=!(r>o||c<i||s>t||d<n);u&&l.push(a)}),l}function o(){++c;var o=l.scrollTop(),t=l.scrollLeft(),i=t+l.width(),a=o+l.height(),r=n(o+d.top,i+d.right,a+d.bottom,t+d.left);e.each(r,function(e,n){var o=n.data("scrollSpy:ticks");"number"!=typeof o&&n.triggerHandler("scrollSpy:enter"),n.data("scrollSpy:ticks",c)}),e.each(s,function(e,n){var o=n.data("scrollSpy:ticks");"number"==typeof o&&o!==c&&(n.triggerHandler("scrollSpy:exit"),n.data("scrollSpy:ticks",null))}),s=r}function t(){l.trigger("scrollSpy:winSize")}function i(e,n,o){var t,i,l,a=null,s=0;o||(o={});var r=function(){s=o.leading===!1?0:u(),a=null,l=e.apply(t,i),t=i=null};return function(){var c=u();s||o.leading!==!1||(s=c);var d=n-(c-s);return t=this,i=arguments,d<=0?(clearTimeout(a),a=null,s=c,l=e.apply(t,i),t=i=null):a||o.trailing===!1||(a=setTimeout(r,d)),l}}var l=e(window),a=[],s=[],r=!1,c=0,d={top:0,right:0,bottom:0,left:0},u=Date.now||function(){return(new Date).getTime()};e.scrollSpy=function(n,t){n=e(n),n.each(function(n,o){a.push(e(o))}),t=t||{throttle:100},d.top=t.offsetTop||0,d.right=t.offsetRight||0,d.bottom=t.offsetBottom||0,d.left=t.offsetLeft||0;var s=i(o,t.throttle||100),c=function(){e(document).ready(s)};return r||(l.on("scroll",c),l.on("resize",c),r=!0),setTimeout(c,0),n},e.winSizeSpy=function(n){return e.winSizeSpy=function(){return l},n=n||{throttle:100},l.on("resize",i(t,n.throttle||100))},e.fn.scrollSpy=function(n){return e.scrollSpy(e(this),n)}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1zLmpzIiwiaGVhZGVyLmpzIiwibWFpbi5qcyIsInBsYW50aWxsYV9wbHVnaW5fanF1ZXJ5LmpzIiwic2Nyb2xsc3B5LmpzIl0sIm5hbWVzIjpbImZvcm1fZm9jdXMiLCJpbnB1dCIsIiQiLCJwbGFjZWhvbGRlciIsInRoaXMiLCJhdHRyIiwiZWFjaCIsInZhbCIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNpYmxpbmdzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIm9uIiwiaGVhZGVyIiwiaGVhZGVyX3Njcm9sbCIsIndpbmRvdyIsInNjcm9sbCIsImN1cnJlbnRUb3AiLCJzY3JvbGxUb3AiLCJiZWZvcmVUb3AiLCJzbGlkZURvd24iLCJzbGlkZVVwIiwiYWN0aXZlTWVudSIsImhlYWRlcl9kcm9wZG93biIsImNsaWNrIiwic2xpZGVUb2dnbGUiLCJmYWRlT3V0IiwiZG9jdW1lbnQiLCJrZXl1cCIsImUiLCJrZXlDb2RlIiwiaGlkZSIsImhlYWRlcl9zbGlkZU1lbnUiLCJzbGlkZW91dE1lbnUiLCJib2R5IiwiYm90b25NZW51Iiwib3ZlcmxheSIsImV2ZW50IiwidG9nZ2xlQ2xhc3MiLCJjc3MiLCJyZW1vdmVBdHRyIiwiaW5pdCIsImRyb3Bkb3duTWVudSIsInNjcm9sbFRvVG9wIiwiYWNvcmRlb24iLCJsbGFtYWRhQWpheCIsInBlZ2FtZW50byIsImhlYWRlckZpeGVkIiwiZWxlbWVudCIsIlRvcCIsInNlZ3VpbWllbnRvIiwiZWxlbWVudF9saXN0YSIsImlkIiwiZW5sYWNlIiwiY2hpbGRyZW4iLCJoYXNoIiwic2Nyb2xsU3B5IiwiZWxlbW5ldCIsInNsaWRlTWVudSIsImV4aXQiLCJwYWRkaW5nLWxlZnQiLCJ0cmFuc2l0aW9uIiwiZGV0YWNoIiwiYW5pbWF0ZSIsImFjb3JkZW9uSGlqbyIsInBhcmVudCIsImZpbmQiLCJ1cmwiLCJkYXRhIiwiYWpheCIsImFzeW5jIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwiYSIsImh0bWwiLCJlcnJvciIsInJlYWR5IiwiZm4iLCJwbHVnaW5OYW1lIiwibWV0aG9kIiwiZGVmYXVsdHMiLCJmb28iLCJzZXR0aW5ncyIsIm1ldGhvZHMiLCJvcHRpb25zIiwiZXh0ZW5kIiwiZm9vX3B1YmxpY19tZXRob2QiLCJhcHBseSIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJjYWxsIiwiYXJndW1lbnRzIiwialF1ZXJ5IiwiZmluZEVsZW1lbnRzIiwidG9wIiwicmlnaHQiLCJib3R0b20iLCJsZWZ0IiwiaGl0cyIsImVsZW1lbnRzIiwiaSIsImVsVG9wIiwib2Zmc2V0IiwiZWxMZWZ0IiwiZWxSaWdodCIsIndpZHRoIiwiZWxCb3R0b20iLCJoZWlnaHQiLCJpc0ludGVyc2VjdCIsInB1c2giLCJvblNjcm9sbCIsInRpY2tzIiwialdpbmRvdyIsInNjcm9sbExlZnQiLCJpbnRlcnNlY3Rpb25zIiwibGFzdFRpY2siLCJ0cmlnZ2VySGFuZGxlciIsImVsZW1lbnRzSW5WaWV3Iiwib25XaW5TaXplIiwidHJpZ2dlciIsInRocm90dGxlIiwiZnVuYyIsIndhaXQiLCJjb250ZXh0IiwiYXJncyIsInJlc3VsdCIsInRpbWVvdXQiLCJwcmV2aW91cyIsImxhdGVyIiwibGVhZGluZyIsImdldFRpbWUiLCJub3ciLCJyZW1haW5pbmciLCJjbGVhclRpbWVvdXQiLCJ0cmFpbGluZyIsInNldFRpbWVvdXQiLCJpc1NweWluZyIsIkRhdGUiLCJzZWxlY3RvciIsIm9mZnNldFRvcCIsIm9mZnNldFJpZ2h0Iiwib2Zmc2V0Qm90dG9tIiwib2Zmc2V0TGVmdCIsInRocm90dGxlZFNjcm9sbCIsInJlYWR5U2Nyb2xsIiwid2luU2l6ZVNweSJdLCJtYXBwaW5ncyI6IkFBQUFBLFdBQUEsV0FFQSxHQUFBQyxHQUFBQyxFQUFBLHNCQUNBQyxFQUFBRCxFQUFBRSxNQUFBQyxLQUFBLGNBR0FKLEdBQUFLLEtBQUEsV0FDQSxHQUNBSCxJQURBRCxFQUFBLHNCQUNBQSxFQUFBRSxNQUFBQyxLQUFBLGVBRUFILEdBQUFFLE1BQUFHLE1BQUFD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QUMsR0FBQXZCLEVBQUFWLEVBQUEzQixFQUFBcUMsVUFBQSxLQUNBd0IsRUFBQSxXQUNBaEosRUFBQTBCLFVBQUFpRCxNQUFBb0UsR0FZQSxPQVRBUCxLQUNBeEIsRUFBQXJHLEdBQUEsU0FBQXFJLEdBQ0FoQyxFQUFBckcsR0FBQSxTQUFBcUksR0FDQVIsR0FBQSxHQUlBRCxXQUFBUyxFQUFBLEdBRUFOLEdBUUExSSxFQUFBaUosV0FBQSxTQUFBOUQsR0FLQSxNQUpBbkYsR0FBQWlKLFdBQUEsV0FBQSxNQUFBakMsSUFDQTdCLEVBQUFBLElBQ0FxQyxTQUFBLEtBRUFSLEVBQUFyRyxHQUFBLFNBQUE2RyxFQUFBRixFQUFBbkMsRUFBQXFDLFVBQUEsT0FjQXhILEVBQUE0RSxHQUFBckIsVUFBQSxTQUFBNEIsR0FDQSxNQUFBbkYsR0FBQXVELFVBQUF2RCxFQUFBRSxNQUFBaUYsS0FHQVMiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmb3JtX2ZvY3VzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGlucHV0ID0gJCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKSxcbiAgICAgICAgcGxhY2Vob2xkZXIgPSAkKHRoaXMpLmF0dHIoJ3BsYWNlaG9sZGVyJyk7XG5cbiAgICAvL2VudHJhIGVuIGNhZGEgaW5wdXQgeSBjb21wcnVlYmEgc2kgdGllbmUgYWxndW4gdmFsb3IgbyBlbCBwbGFjZWhvbGRlclxuICAgIGlucHV0LmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbnB1dCA9ICQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJyksXG4gICAgICAgICAgICBwbGFjZWhvbGRlciA9ICQodGhpcykuYXR0cigncGxhY2Vob2xkZXInKTtcblxuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggPiAwIHx8IHBsYWNlaG9sZGVyICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGFiZWwtbGFiZWwnKS5hZGRDbGFzcygnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGFiZWwtbGFiZWwnKS5yZW1vdmVDbGFzcygnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaW5wdXQub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoICE9PSAwIHx8IHBsYWNlaG9sZGVyICE9PSAgdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGFiZWwtbGFiZWwnKS5hZGRDbGFzcygnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGFiZWwtbGFiZWwnKS5yZW1vdmVDbGFzcygnZmxvYXRpbmctbGFiZWwnKTtcblxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvL2N1YW5kbyBlbCBpbnB1dCB0aWVuZSBlbCBmb2NvXG4gICAgaW5wdXQub24oJ2ZvY3VzaW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCA+PSAwIHx8IHBsYWNlaG9sZGVyICE9PSAgdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGFiZWwtbGFiZWwnKS5hZGRDbGFzcygnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGFiZWwtbGFiZWwnKS5yZW1vdmVDbGFzcygnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyQodGhpcykuc2libGluZ3MoJy5sYWJlbC1sYWJlbCcpLmFkZENsYXNzKCdmbG9hdGluZy1sYWJlbCcpO1xuICAgIH0pO1xuXG4gICAgaW5wdXQub24oJ2ZvY3Vzb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggIT09IDAgKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGFiZWwtbGFiZWwnKS5hZGRDbGFzcygnZmxvYXRpbmctbGFiZWwnKTtcbiAgICAgICAgfWVsc2UgaWYgKCQodGhpcykuYXR0cigncGxhY2Vob2xkZXInKSAhPT0gIHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmxhYmVsLWxhYmVsJykuYWRkQ2xhc3MoJ2Zsb2F0aW5nLWxhYmVsJyk7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5sYWJlbC1sYWJlbCcpLnJlbW92ZUNsYXNzKCdmbG9hdGluZy1sYWJlbCcpO1xuICAgICAgICB9XG4gICAgfSk7XG5cblxufVxuXG5mb3JtX2ZvY3VzKCk7XG4iLCJoZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICBoZWFkZXJfc2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBiZWZvcmVUb3AgPSAwLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUb3AgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50VG9wIDwgdGhpcy5iZWZvcmVUb3ApIHtcbiAgICAgICAgICAgICAgICAkKFwiaGVhZGVyXCIpLnNsaWRlRG93bigzMDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKFwiaGVhZGVyXCIpLnNsaWRlVXAoMzAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmVmb3JlVG9wID0gY3VycmVudFRvcDtcbiAgICAgICAgfSlcbiAgICB9LFxuXG4gICAgYWN0aXZlTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnaGVhZGVyIGxpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnaGVhZGVyIGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cblxuICAgIGhlYWRlcl9kcm9wZG93biA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAkKCdoZWFkZXIgYScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5kcm9wZG93bk1lbnUnKS5zbGlkZVRvZ2dsZSgzMDApO1xuICAgICAgICB9KS5vbignZm9jdXNvdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZHJvcGRvd25NZW51JykuZmFkZU91dCgzMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5rZXl1cChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYoZS5rZXlDb2RlID09PSAyNyl7XG4gICAgICAgICAgICAgICAgJCgnLmVubGFjZXMgYScpLnNpYmxpbmdzKCcuZHJvcGRvd25NZW51JykuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgaGVhZGVyX3NsaWRlTWVudSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgc2xpZGVvdXRNZW51ID0gJCgnLmVubGFjZXMnKSxcbiAgICAgICAgICAgIGJvZHkgPSAkKCdib2R5JyksXG4gICAgICAgICAgICBib3Rvbk1lbnUgPSAkKCcubmF2LWljb24sICNidG4tbWVudScpLFxuICAgICAgICAgICAgb3ZlcmxheSA9ICQoJy5zaWRlTmF2Jyk7XG5cbiAgICAgICAgLy9hYnJpciBtZW51IGl6cXVpZXJkYSBpY29ubyBtZW51XG4gICAgICAgIGJvdG9uTWVudS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCl7XG4gICAgICAgIFx0c2xpZGVvdXRNZW51LnRvZ2dsZUNsYXNzKFwib3BlblwiKTtcbiAgICAgICAgICAgIC8vYmxvcXVlYXIgYm9keSBwYXJhIG5vIGhhY2VyIHNjcm9vbCBjb24gbWVudSBhYmllcnRvXG4gICAgICAgICAgICBvdmVybGF5LmFkZENsYXNzKCdzaWRlLW92ZXJsYXknKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgLy9tZW51IGhhbXVyZ3Vlc2FcbiAgICAgICAgICAgIGJvdG9uTWVudS5hZGRDbGFzcygnaWNvbi1hY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3ZlcmxheS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzbGlkZW91dE1lbnUucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgIG92ZXJsYXkucmVtb3ZlQ2xhc3MoJ3NpZGUtb3ZlcmxheScpO1xuICAgICAgICAgICAgYm9keS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgLy9tZW51IGhhbXVyZ3Vlc2FcbiAgICAgICAgXHRib3Rvbk1lbnUucmVtb3ZlQ2xhc3MoJ2ljb24tYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBoZWFkZXJfc2Nyb2xsKCk7XG4gICAgaGVhZGVyX2Ryb3Bkb3duKCk7XG4gICAgYWN0aXZlTWVudSgpO1xuICAgIGhlYWRlcl9zbGlkZU1lbnUoKTtcbn1cblxuaGVhZGVyKCk7XG4iLCJpbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIC8vaGVhZGVyRml4ZWQoJyNoZWFkZXInKTtcbiAgICBkcm9wZG93bk1lbnUoJy5oZWFkZXJfX25hdl9fbWVudUhlYWRlcl9fbGlzdEl0ZW1fX2VubGFjZScpO1xuICAgIC8vc2xpZGVNZW51KCcjYnRuLW1lbnUnKTtcbiAgICBzY3JvbGxUb1RvcCgnLnNjcm9sbFRvcCcpO1xuICAgIGFjdGl2ZU1lbnUoJy5oZWFkZXJfX25hdl9fbWVudUhlYWRlcl9fbGlzdEl0ZW0nKTtcbiAgICBhY29yZGVvbignLmFjb3JkZW9uLXRpdGxlJywgJy5hY29yZGVvbi1wYXJhZ3JhcGgnKTtcbiAgICBsbGFtYWRhQWpheCgnLmxpLWl0ZW0nKTtcbiAgICBwZWdhbWVudG8oJy5jb250ZW50Zml4ZWQnKTtcbn0sXG5cbmhlYWRlckZpeGVkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICB2YXIgaGVhZGVyID0gJ2hlYWRlcl9maXhlZCc7XG5cbiAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gMzApe1xuICAgICAgICAgICAgJChlbGVtZW50KS5hZGRDbGFzcyhoZWFkZXIpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoaGVhZGVyKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSxcblxucGVnYW1lbnRvID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIFRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcblxuICAgICAgICBpZiAoVG9wID4gMzApIHtcbiAgICAgICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoJ2ZpeGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xuICAgICAgICB9XG4gICAgfSlcbn0sXG5cbnNlZ3VpbWllbnRvID0gZnVuY3Rpb24gKGVsZW1lbnQsIGVsZW1lbnRfbGlzdGEpIHtcbiAgICAkKGVsZW1lbnQpLm9uKCdzY3JvbGxTcHk6ZW50ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlkID0gJyMnICsgJCh0aGlzKS5hdHRyKCdpZCcpO1xuXG4gICAgICAgICQoZWxlbWVudF9saXN0YSkuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGVubGFjZSA9ICQodGhpcykuY2hpbGRyZW4oJ2EnKSxcbiAgICAgICAgICAgICAgICBoYXNoID0gZW5sYWNlLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgIGlmIChpZCA9PSBoYXNoKSB7XG4gICAgICAgICAgICAgICAgJChlbGVtZW50X2xpc3RhKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSk7XG5cbiAgICAkKGVsZW1lbnQpLm9uKCdzY3JvbGxTcHk6ZXhpdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaWQgPSAnIycgKyAkKHRoaXMpLmF0dHIoJ2lkJyk7XG5cbiAgICAgICAgJChlbGVtZW50X2xpc3RhKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgZW5sYWNlID0gJCh0aGlzKS5jaGlsZHJlbignYScpLFxuICAgICAgICAgICAgICAgIGhhc2ggPSBlbmxhY2UuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgaWYgKGlkID09IGhhc2gpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KTtcblxuICAgICQoZWxlbWVudCkuc2Nyb2xsU3B5KCk7XG59LFxuXG5kcm9wZG93bk1lbnUgPSBmdW5jdGlvbiAoZWxlbW5ldCkge1xuICAgIHZhciBrZXlkb3duID0gJCgnLmhlYWRlcl9fbmF2X19tZW51SGVhZGVyX19saXN0SXRlbV9fZW5sYWNlJyk7XG5cbiAgICAkKGVsZW1uZXQpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmRyb3Bkb3duTWVudScpLnNsaWRlVG9nZ2xlKDMwMCk7XG4gICAgfSkub24oJ2ZvY3Vzb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZHJvcGRvd25NZW51JykuZmFkZU91dCgzMDApO1xuICAgIH0pO1xuXG4gICAgLy8gJChkb2N1bWVudCkua2V5ZG93bihmdW5jdGlvbiAoZSkge1xuICAgIC8vICAgICBpZihlLmtleUNvZGUgPT09IDI3KXtcbiAgICAvLyAgICAgICAgICQoa2V5ZG93bikuc2libGluZ3MoJy5kcm9wZG93bk1lbnUnKS5oaWRlKCk7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9KTtcbn0sXG5cbnNsaWRlTWVudSA9IGZ1bmN0aW9uIChzbGlkZU1lbnUsIGV4aXQpIHtcbiAgICAvL2FicmlyIG1lbnUgaXpxdWllcmRhIGljb25vIG1lbnVcbiAgICAkKHNsaWRlTWVudSkub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpe1xuICAgIFx0dmFyIHNsaWRlb3V0TWVudSA9ICQoJy5lbmxhY2VzJyksXG4gICAgICAgICAgICBib2R5ID0gJCgnYm9keScpO1xuXG4gICAgXHRzbGlkZW91dE1lbnUudG9nZ2xlQ2xhc3MoXCJvcGVuXCIpO1xuXG4gICAgICAgIC8vYm9keS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJvdmVybGF5XCI+PC9kaXY+JykuY3NzKHsncGFkZGluZy1sZWZ0JzogJzEzMHB4JywgJ3RyYW5zaXRpb24nOiAnYWxsIDAuM3MnfSk7XG4gICAgfSk7XG5cbiAgICAvL2NlcnJhciBtZW51IGVuIGxhIHhcbiAgICAkKGV4aXQpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNsaWRlb3V0TWVudSA9ICQoJyNidG4tbWVudScpO1xuXG4gICAgXHRzbGlkZW91dE1lbnUucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xuICAgICAgICAkKCdib2R5JykuY3NzKHsncGFkZGluZy1sZWZ0JzogJzAnLCAndHJhbnNpdGlvbic6ICdhbGwgMC4zcyd9KTtcblxuICAgICAgICAkKCc8ZGl2IGNsYXNzPVwib3ZlcmxheVwiPjwvZGl2PicpLmRldGFjaCgpO1xuXG4gICAgfSk7XG59LFxuXG5zY3JvbGxUb1RvcCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDgwICl7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLnNsaWRlRG93bigpO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLnNsaWRlVXAoKTtcbiAgICAgICAgfVxuICAgIH0pLFxuXG4gICAgJChlbGVtZW50KS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogMFxuICAgICAgICB9LCA0MDApO1xuICAgIH0pO1xufSxcblxuYWN0aXZlTWVudSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgJChlbGVtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcbn0sXG5cbmFjb3JkZW9uID0gZnVuY3Rpb24gKGFjb3JkZW9uLCBhY29yZGVvbkhpam8gKSB7XG4gICAgJChhY29yZGVvbikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKGFjb3JkZW9uSGlqbykuc2xpZGVUb2dnbGUoMTAwKTtcbiAgICAgICAgLy9jaWVycmEgZWwgYWNvcmRlb24gYWJpZXJ0b1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCkuZmluZChhY29yZGVvbkhpam8pLnNsaWRlVXAoKTtcblxuICAgICAgICAvL2NhbWJpbyBkZSBpY29ub1xuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCkudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93biBmYS1jaGV2cm9uLXVwJyk7XG4gICAgICAgIC8vY2FtYmlvIGRlIGljb25vIGN1YW5kbyBjaWVycmEgYWNvcmRlcm9uIGFiaWVydG9cbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJ2knKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCcpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgICB9KTtcbn0sXG5cblxuLy9MbGFtYWRhIGFqYXggcGFyYSBsYSBndWlhIGRlIGVzdGlsb1xubGxhbWFkYUFqYXggPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICQoZWxlbWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciB1cmwgPSAkKHRoaXMpLmRhdGEoXCJocmVmXCIpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IHVybCArICcuaHRtbCcsXG4gICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihhKXtcbiAgICAgICAgICAgICAgICAkKCcuY29udGVudF9jb250YWluZXInKS5odG1sKGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihhKXtcbiAgICAgICAgICAgICAgICAkKCcuY29udGVudF9jb250YWluZXInKS5odG1sKCc8aDQ+TG8gc2VudGltb3MsIHNlIHByb2R1am8gdW4gZXJyb3I8L2g0PicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH0pO1xufSxcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgaW5pdCgpO1xuXG59KTtcbiIsIi8vIHJlbWVtYmVyIHRvIGNoYW5nZSBldmVyeSBpbnN0YW5jZSBvZiBcInBsdWdpbk5hbWVcIlxuLy8gdG8gdGhlIG5hbWUgb2YgeW91ciBwbHVnaW4hXG47KGZ1bmN0aW9uKCQpIHtcbiBcbiAgICAvLyBoZXJlIGl0IGdvZXMhXG4gICAgJC5mbi5wbHVnaW5OYW1lID0gZnVuY3Rpb24obWV0aG9kKSB7XG4gXG4gICAgICAgIC8vIHBsdWdpbidzIGRlZmF1bHQgb3B0aW9uc1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gXG4gICAgICAgICAgICBmb286ICdiYXInXG4gXG4gICAgICAgIH1cbiBcbiAgICAgICAgLy8gdGhpcyB3aWxsIGhvbGQgdGhlIG1lcmdlZCBkZWZhdWx0IGFuZCB1c2VyLXByb3ZpZGVkIHByb3BlcnRpZXNcbiAgICAgICAgLy8geW91IHdpbGwgaGF2ZSB0byBhY2Nlc3MgdGhlIHBsdWdpbidzIHByb3BlcnRpZXMgdGhyb3VnaCB0aGlzIG9iamVjdCFcbiAgICAgICAgLy8gc2V0dGluZ3MucHJvcGVydHlOYW1lXG4gICAgICAgIHZhciBzZXR0aW5ncyA9IHt9XG4gXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RzXG4gICAgICAgIC8vIHRvIGtlZXAgdGhlICQuZm4gbmFtZXNwYWNlIHVuY2x1dHRlcmVkLCBjb2xsZWN0IGFsbFxuICAgICAgICAvLyBvZiB0aGUgcGx1Z2luJ3MgbWV0aG9kcyBpbiBhbiBvYmplY3QgbGl0ZXJhbCBhbmQgY2FsbFxuICAgICAgICAvLyB0aGVtIGJ5IHBhc3NpbmcgdGhlIHN0cmluZyBuYW1lIG9mIHRoZSBtZXRob2QgdG8gdGhlIHBsdWdpblxuICAgICAgICAvL1xuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kcyBjYW4gYmUgY2FsbGVkIGFzXG4gICAgICAgIC8vICQoc2VsZWN0b3IpLnBsdWdpbk5hbWUoJ21ldGhvZE5hbWUnLCBhcmcxLCBhcmcyLCAuLi4gYXJnbilcbiAgICAgICAgLy8gd2hlcmUgXCJwbHVnaW5OYW1lXCIgaXMgdGhlIG5hbWUgb2YgeW91ciBwbHVnaW4gYW5kIFwibWV0aG9kTmFtZVwiXG4gICAgICAgIC8vaXMgdGhlIG5hbWUgb2YgYSBmdW5jdGlvbiBhdmFpbGFibGUgaW5cbiAgICAgICAgLy8gdGhlIFwibWV0aG9kc1wiIG9iamVjdCBiZWxvdztcbiAgICAgICAgLy8gYXJnMSAuLi4gYXJnbiBhcmUgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byB0aGUgbWV0aG9kXG4gICAgICAgIC8vXG4gICAgICAgIC8vIG9yLCBmcm9tIHdpdGhpbiB0aGUgcGx1Z2luIGl0c2VsZiwgYXNcbiAgICAgICAgLy8gbWV0aG9kcy5tZXRob2ROYW1lKGFyZzEsIGFyZzIsIC4uLiBhcmduKVxuICAgICAgICAvLyB3aGVyZSBcIm1ldGhvZE5hbWVcIiBpcyB0aGUgbmFtZSBvZiBhIGZ1bmN0aW9uIGF2YWlsYWJsZVxuICAgICAgICAvLyBpbiB0aGUgXCJtZXRob2RzXCIgb2JqZWN0IGJlbG93XG4gICAgICAgIHZhciBtZXRob2RzID0ge1xuIFxuICAgICAgICAgICAgLy8gdGhpcyB0aGUgY29uc3RydWN0b3IgbWV0aG9kIHRoYXQgZ2V0cyBjYWxsZWQgd2hlblxuICAgICAgICAgICAgLy8gdGhlIG9iamVjdCBpcyBjcmVhdGVkXG4gICAgICAgICAgICBpbml0IDogZnVuY3Rpb24ob3B0aW9ucykge1xuIFxuICAgICAgICAgICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBhbGwgdGhlIERPTSBlbGVtZW50cyB3ZSBhcmVcbiAgICAgICAgICAgICAgICAvLyBhdHRhY2hpbmcgdGhlIHBsdWdpbiB0b1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBwbHVnaW4ncyBmaW5hbCBwcm9wZXJ0aWVzIGFyZSB0aGUgbWVyZ2VkIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHVzZXItcHJvdmlkZWQgcHJvcGVydGllcyAoaWYgYW55KVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGhhcyB0aGUgYWR2YW50YWdlIG9mIG5vdCBwb2xsdXRpbmcgdGhlIGRlZmF1bHRzLFxuICAgICAgICAgICAgICAgICAgICAvLyBtYWtpbmcgdGhlIHNhbWUgaW5zdGFjZSByZS11c2FibGUgd2l0aFxuICAgICAgICAgICAgICAgICAgICAvLyBuZXcgb3B0aW9uczsgdGhhbmtzIHRvIFN0ZXZlbiBCbGFjayBmb3Igc3VnZ2VzdGluZyB0aGlzXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKVxuIFxuICAgICAgICAgICAgICAgICAgICAvLyBcImVsZW1lbnRcIiBob2xkcyB0aGUgalF1ZXJ5IG9iamVjdCBvZiB0aGUgY3VycmVudCBET00gZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9ICQodGhpcyk7XG4gXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvZGUgZ29lcyBoZXJlXG4gXG4gICAgICAgICAgICAgICAgfSk7XG4gXG4gICAgICAgICAgICB9LFxuIFxuICAgICAgICAgICAgLy8gYSBwdWJsaWMgbWV0aG9kLiBmb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcyBvbmx5IC0gcmVtb3ZlIGl0IVxuICAgICAgICAgICAgZm9vX3B1YmxpY19tZXRob2Q6IGZ1bmN0aW9uKCkge1xuIFxuICAgICAgICAgICAgICAgIC8vIGNvZGUgZ29lcyBoZXJlXG4gXG4gICAgICAgICAgICB9XG4gXG4gICAgICAgIH1cbiBcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIC8vIHRoZXNlIG1ldGhvZHMgY2FuIGJlIGNhbGxlZCBvbmx5IGZyb20gd2l0aGluIHRoZSBwbHVnaW5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzIGNhbiBiZSBjYWxsZWQgYXNcbiAgICAgICAgLy8gaGVscGVycy5tZXRob2ROYW1lKGFyZzEsIGFyZzIsIC4uLiBhcmduKVxuICAgICAgICAvLyB3aGVyZSBcIm1ldGhvZE5hbWVcIiBpcyB0aGUgbmFtZSBvZiBhIGZ1bmN0aW9uIGF2YWlsYWJsZSBpblxuICAgICAgICAvLyB0aGUgXCJoZWxwZXJzXCIgb2JqZWN0IGJlbG93OyBhcmcxIC4uLiBhcmduIGFyZSBhcmd1bWVudHMgdG9cbiAgICAgICAgLy8gYmUgcGFzc2VkIHRvIHRoZSBtZXRob2RcbiAgICAgICAgdmFyIGhlbHBlcnMgPSB7XG4gXG4gICAgICAgICAgICAvLyBhIHByaXZhdGUgbWV0aG9kLiBmb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcyBvbmx5IC0gcmVtb3ZlIGl0IVxuICAgICAgICAgICAgZm9vX3ByaXZhdGVfbWV0aG9kOiBmdW5jdGlvbigpIHtcbiBcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGdvZXMgaGVyZVxuIFxuICAgICAgICAgICAgfVxuIFxuICAgICAgICB9XG4gXG4gICAgICAgIC8vIGlmIGEgbWV0aG9kIGFzIHRoZSBnaXZlbiBhcmd1bWVudCBleGlzdHNcbiAgICAgICAgaWYgKG1ldGhvZHNbbWV0aG9kXSkge1xuIFxuICAgICAgICAgICAgLy8gY2FsbCB0aGUgcmVzcGVjdGl2ZSBtZXRob2RcbiAgICAgICAgICAgIHJldHVybiBtZXRob2RzW21ldGhvZF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gXG4gICAgICAgIC8vIGlmIGFuIG9iamVjdCBpcyBnaXZlbiBhcyBtZXRob2QgT1Igbm90aGluZyBpcyBnaXZlbiBhcyBhcmd1bWVudFxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnIHx8ICFtZXRob2QpIHtcbiBcbiAgICAgICAgICAgIC8vIGNhbGwgdGhlIGluaXRpYWxpemF0aW9uIG1ldGhvZFxuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuIFxuICAgICAgICAvLyBvdGhlcndpc2VcbiAgICAgICAgfSBlbHNlIHtcbiBcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgYW4gZXJyb3JcbiAgICAgICAgICAgICQuZXJyb3IoICdNZXRob2QgXCInICsgIG1ldGhvZCArICdcIiBkb2VzIG5vdCBleGlzdCBpbiBwbHVnaW5OYW1lIHBsdWdpbiEnKTtcbiBcbiAgICAgICAgfVxuIFxuICAgIH1cbiBcbn0pKGpRdWVyeSk7IiwiLy8gcmVtZW1iZXIgdG8gY2hhbmdlIGV2ZXJ5IGluc3RhbmNlIG9mIFwicGx1Z2luTmFtZVwiXG4vLyB0byB0aGUgbmFtZSBvZiB5b3VyIHBsdWdpbiFcbjsoZnVuY3Rpb24oJCkge1xuXG5cdHZhciBqV2luZG93ID0gJCh3aW5kb3cpO1xuXHR2YXIgZWxlbWVudHMgPSBbXTtcblx0dmFyIGVsZW1lbnRzSW5WaWV3ID0gW107XG5cdHZhciBpc1NweWluZyA9IGZhbHNlO1xuXHR2YXIgdGlja3MgPSAwO1xuXHR2YXIgb2Zmc2V0ID0ge1xuXHRcdHRvcCA6IDAsXG5cdFx0cmlnaHQgOiAwLFxuXHRcdGJvdHRvbSA6IDAsXG5cdFx0bGVmdCA6IDAsXG5cdH1cblxuXHQvKipcblx0ICogRmluZCBlbGVtZW50cyB0aGF0IGFyZSB3aXRoaW4gdGhlIGJvdW5kYXJ5XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB0b3Bcblx0ICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b21cblx0ICogQHBhcmFtIHtudW1iZXJ9IGxlZnRcblx0ICogQHJldHVybiB7alF1ZXJ5fVx0XHRBIGNvbGxlY3Rpb24gb2YgZWxlbWVudHNcblx0ICovXG5cdGZ1bmN0aW9uIGZpbmRFbGVtZW50cyh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpIHtcblx0XHR2YXIgaGl0cyA9ICQoKTtcblx0XHQkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcblx0XHRcdHZhciBlbFRvcCA9IGVsZW1lbnQub2Zmc2V0KCkudG9wLFxuXHRcdFx0XHRlbExlZnQgPSBlbGVtZW50Lm9mZnNldCgpLmxlZnQsXG5cdFx0XHRcdGVsUmlnaHQgPSBlbExlZnQgKyBlbGVtZW50LndpZHRoKCksXG5cdFx0XHRcdGVsQm90dG9tID0gZWxUb3AgKyBlbGVtZW50LmhlaWdodCgpO1xuXG5cdFx0XHR2YXIgaXNJbnRlcnNlY3QgPSAhKGVsTGVmdCA+IHJpZ2h0IHx8XG5cdFx0XHRcdGVsUmlnaHQgPCBsZWZ0IHx8XG5cdFx0XHRcdGVsVG9wID4gYm90dG9tIHx8XG5cdFx0XHRcdGVsQm90dG9tIDwgdG9wKTtcblxuXHRcdFx0aWYgKGlzSW50ZXJzZWN0KSB7XG5cdFx0XHRcdGhpdHMucHVzaChlbGVtZW50KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBoaXRzO1xuXHR9XG5cblx0LyoqXG5cdCAqIENhbGxlZCB3aGVuIHRoZSB1c2VyIHNjcm9sbHMgdGhlIHdpbmRvd1xuXHQgKi9cblx0ZnVuY3Rpb24gb25TY3JvbGwoKSB7XG5cdFx0Ly8gdW5pcXVlIHRpY2sgaWRcblx0XHQrK3RpY2tzO1xuXG5cdFx0Ly8gdmlld3BvcnQgcmVjdGFuZ2xlXG5cdFx0dmFyIHRvcCA9IGpXaW5kb3cuc2Nyb2xsVG9wKCksXG5cdFx0XHRsZWZ0ID0galdpbmRvdy5zY3JvbGxMZWZ0KCksXG5cdFx0XHRyaWdodCA9IGxlZnQgKyBqV2luZG93LndpZHRoKCksXG5cdFx0XHRib3R0b20gPSB0b3AgKyBqV2luZG93LmhlaWdodCgpO1xuXG5cdFx0Ly8gZGV0ZXJtaW5lIHdoaWNoIGVsZW1lbnRzIGFyZSBpbiB2aWV3XG5cdFx0dmFyIGludGVyc2VjdGlvbnMgPSBmaW5kRWxlbWVudHModG9wK29mZnNldC50b3AsIHJpZ2h0K29mZnNldC5yaWdodCwgYm90dG9tK29mZnNldC5ib3R0b20sIGxlZnQrb2Zmc2V0LmxlZnQpO1xuXHRcdCQuZWFjaChpbnRlcnNlY3Rpb25zLCBmdW5jdGlvbihpLCBlbGVtZW50KSB7XG5cdFx0XHR2YXIgbGFzdFRpY2sgPSBlbGVtZW50LmRhdGEoJ3Njcm9sbFNweTp0aWNrcycpO1xuXHRcdFx0aWYgKHR5cGVvZiBsYXN0VGljayAhPSAnbnVtYmVyJykge1xuXHRcdFx0XHQvLyBlbnRlcmVkIGludG8gdmlld1xuXHRcdFx0XHRlbGVtZW50LnRyaWdnZXJIYW5kbGVyKCdzY3JvbGxTcHk6ZW50ZXInKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gdXBkYXRlIHRpY2sgaWRcblx0XHRcdGVsZW1lbnQuZGF0YSgnc2Nyb2xsU3B5OnRpY2tzJywgdGlja3MpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gZGV0ZXJtaW5lIHdoaWNoIGVsZW1lbnRzIGFyZSBubyBsb25nZXIgaW4gdmlld1xuXHRcdCQuZWFjaChlbGVtZW50c0luVmlldywgZnVuY3Rpb24oaSwgZWxlbWVudCkge1xuXHRcdFx0dmFyIGxhc3RUaWNrID0gZWxlbWVudC5kYXRhKCdzY3JvbGxTcHk6dGlja3MnKTtcblx0XHRcdGlmICh0eXBlb2YgbGFzdFRpY2sgPT0gJ251bWJlcicgJiYgbGFzdFRpY2sgIT09IHRpY2tzKSB7XG5cdFx0XHRcdC8vIGV4aXRlZCBmcm9tIHZpZXdcblx0XHRcdFx0ZWxlbWVudC50cmlnZ2VySGFuZGxlcignc2Nyb2xsU3B5OmV4aXQnKTtcblx0XHRcdFx0ZWxlbWVudC5kYXRhKCdzY3JvbGxTcHk6dGlja3MnLCBudWxsKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIHJlbWVtYmVyIGVsZW1lbnRzIGluIHZpZXcgZm9yIG5leHQgdGlja1xuXHRcdGVsZW1lbnRzSW5WaWV3ID0gaW50ZXJzZWN0aW9ucztcblx0fVxuXG5cdC8qKlxuXHQgKiBDYWxsZWQgd2hlbiB3aW5kb3cgaXMgcmVzaXplZFxuXHQqL1xuXHRmdW5jdGlvbiBvbldpblNpemUoKSB7XG5cdFx0aldpbmRvdy50cmlnZ2VyKCdzY3JvbGxTcHk6d2luU2l6ZScpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aW1lIGluIG1zXG4gICAqIEBsaWNlbnNlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvbWFzdGVyL0xJQ0VOU0Vcblx0ICogQHR5cGUge2Z1bmN0aW9ufVxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9XG5cdCAqL1xuXHR2YXIgZ2V0VGltZSA9IChEYXRlLm5vdyB8fCBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHR9KTtcblxuXHQvKipcblx0ICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXG5cdCAqIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuXHQgKiBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XG5cdCAqIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXG5cdCAqIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuXHQgKiBAbGljZW5zZSBodHRwczovL3Jhdy5naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL21hc3Rlci9MSUNFTlNFXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcblx0ICogQHBhcmFtIHtudW1iZXJ9IHdhaXRcblx0ICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn1cblx0ICovXG5cdGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0XHR2YXIgY29udGV4dCwgYXJncywgcmVzdWx0O1xuXHRcdHZhciB0aW1lb3V0ID0gbnVsbDtcblx0XHR2YXIgcHJldmlvdXMgPSAwO1xuXHRcdG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cdFx0dmFyIGxhdGVyID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IGdldFRpbWUoKTtcblx0XHRcdHRpbWVvdXQgPSBudWxsO1xuXHRcdFx0cmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0XHRcdGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0XHR9O1xuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgbm93ID0gZ2V0VGltZSgpO1xuXHRcdFx0aWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcblx0XHRcdHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcblx0XHRcdGNvbnRleHQgPSB0aGlzO1xuXHRcdFx0YXJncyA9IGFyZ3VtZW50cztcblx0XHRcdGlmIChyZW1haW5pbmcgPD0gMCkge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0XHRcdHRpbWVvdXQgPSBudWxsO1xuXHRcdFx0XHRwcmV2aW91cyA9IG5vdztcblx0XHRcdFx0cmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0XHRcdFx0Y29udGV4dCA9IGFyZ3MgPSBudWxsO1xuXHRcdFx0fSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuXHRcdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fTtcblx0fTtcblxuXHQvKipcblx0ICogRW5hYmxlcyBTY3JvbGxTcHkgdXNpbmcgYSBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge2pRdWVyeXxzdHJpbmd9IHNlbGVjdG9yICBUaGUgZWxlbWVudHMgY29sbGVjdGlvbiwgb3IgYSBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcdE9wdGlvbmFsLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRocm90dGxlIDogbnVtYmVyIC0+IHNjcm9sbHNweSB0aHJvdHRsaW5nLiBEZWZhdWx0OiAxMDAgbXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRUb3AgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gdG9wLiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0UmlnaHQgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gcmlnaHQuIERlZmF1bHQ6IDBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRCb3R0b20gOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gYm90dG9tLiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0TGVmdCA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSBsZWZ0LiBEZWZhdWx0OiAwXG5cdCAqIEByZXR1cm5zIHtqUXVlcnl9XG5cdCAqL1xuXHQkLnNjcm9sbFNweSA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBvcHRpb25zKSB7XG5cdFx0c2VsZWN0b3IgPSAkKHNlbGVjdG9yKTtcblx0XHRzZWxlY3Rvci5lYWNoKGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcblx0XHRcdGVsZW1lbnRzLnB1c2goJChlbGVtZW50KSk7XG5cdFx0fSk7XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge1xuXHRcdFx0dGhyb3R0bGU6IDEwMFxuXHRcdH07XG5cblx0XHRvZmZzZXQudG9wID0gb3B0aW9ucy5vZmZzZXRUb3AgfHwgMDtcblx0XHRvZmZzZXQucmlnaHQgPSBvcHRpb25zLm9mZnNldFJpZ2h0IHx8IDA7XG5cdFx0b2Zmc2V0LmJvdHRvbSA9IG9wdGlvbnMub2Zmc2V0Qm90dG9tIHx8IDA7XG5cdFx0b2Zmc2V0LmxlZnQgPSBvcHRpb25zLm9mZnNldExlZnQgfHwgMDtcblxuXHRcdHZhciB0aHJvdHRsZWRTY3JvbGwgPSB0aHJvdHRsZShvblNjcm9sbCwgb3B0aW9ucy50aHJvdHRsZSB8fCAxMDApO1xuXHRcdHZhciByZWFkeVNjcm9sbCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQkKGRvY3VtZW50KS5yZWFkeSh0aHJvdHRsZWRTY3JvbGwpO1xuXHRcdH07XG5cblx0XHRpZiAoIWlzU3B5aW5nKSB7XG5cdFx0XHRqV2luZG93Lm9uKCdzY3JvbGwnLCByZWFkeVNjcm9sbCk7XG5cdFx0XHRqV2luZG93Lm9uKCdyZXNpemUnLCByZWFkeVNjcm9sbCk7XG5cdFx0XHRpc1NweWluZyA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gcGVyZm9ybSBhIHNjYW4gb25jZSwgYWZ0ZXIgY3VycmVudCBleGVjdXRpb24gY29udGV4dCwgYW5kIGFmdGVyIGRvbSBpcyByZWFkeVxuXHRcdHNldFRpbWVvdXQocmVhZHlTY3JvbGwsIDApO1xuXG5cdFx0cmV0dXJuIHNlbGVjdG9yO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBMaXN0ZW4gZm9yIHdpbmRvdyByZXNpemUgZXZlbnRzXG5cdCAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1x0XHRcdFx0XHRcdE9wdGlvbmFsLiBTZXQgeyB0aHJvdHRsZTogbnVtYmVyIH0gdG8gY2hhbmdlIHRocm90dGxpbmcuIERlZmF1bHQ6IDEwMCBtc1xuXHQgKiBAcmV0dXJucyB7alF1ZXJ5fVx0XHQkKHdpbmRvdylcblx0ICovXG5cdCQud2luU2l6ZVNweSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHQkLndpblNpemVTcHkgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGpXaW5kb3c7IH07IC8vIGxvY2sgZnJvbSBtdWx0aXBsZSBjYWxsc1xuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHtcblx0XHRcdHRocm90dGxlOiAxMDBcblx0XHR9O1xuXHRcdHJldHVybiBqV2luZG93Lm9uKCdyZXNpemUnLCB0aHJvdHRsZShvbldpblNpemUsIG9wdGlvbnMudGhyb3R0bGUgfHwgMTAwKSk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEVuYWJsZXMgU2Nyb2xsU3B5IG9uIGEgY29sbGVjdGlvbiBvZiBlbGVtZW50c1xuXHQgKiBlLmcuICQoJy5zY3JvbGxTcHknKS5zY3JvbGxTcHkoKVxuXHQgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcdE9wdGlvbmFsLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRocm90dGxlIDogbnVtYmVyIC0+IHNjcm9sbHNweSB0aHJvdHRsaW5nLiBEZWZhdWx0OiAxMDAgbXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRUb3AgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gdG9wLiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0UmlnaHQgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gcmlnaHQuIERlZmF1bHQ6IDBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRCb3R0b20gOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gYm90dG9tLiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0TGVmdCA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSBsZWZ0LiBEZWZhdWx0OiAwXG5cdCAqIEByZXR1cm5zIHtqUXVlcnl9XG5cdCAqL1xuXHQkLmZuLnNjcm9sbFNweSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gJC5zY3JvbGxTcHkoJCh0aGlzKSwgb3B0aW9ucyk7XG5cdH07XG5cbn0pKGpRdWVyeSk7Il19
